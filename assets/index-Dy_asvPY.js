import{r as f,aa as J,ah as Q,ai as X,aj as Z,l as L,ak as ee,al as te,Y as ne,a1 as re,w as M,k as B,a as ae}from"./index-JIW16VMo.js";var _=function(){return _=Object.assign||function(e){for(var u,a=1,r=arguments.length;a<r;a++)for(var t in u=arguments[a])Object.prototype.hasOwnProperty.call(u,t)&&(e[t]=u[t]);return e},_.apply(this,arguments)};function oe(e,u,a,r){return new(a||(a=Promise))(function(t,s){function o(v){try{l(r.next(v))}catch(n){s(n)}}function i(v){try{l(r.throw(v))}catch(n){s(n)}}function l(v){var n;v.done?t(v.value):(n=v.value,n instanceof a?n:new a(function(p){p(n)})).then(o,i)}l((r=r.apply(e,[])).next())})}function ie(e,u){var a,r,t,s,o={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function i(l){return function(v){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;s&&(s=0,n[0]&&(o=0)),o;)try{if(a=1,r&&(t=2&n[0]?r.return:n[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,n[1])).done)return t;switch(r=0,t&&(n=[2&n[0],t.value]),n[0]){case 0:case 1:t=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(t=o.trys,!((t=t.length>0&&t[t.length-1])||n[0]!==6&&n[0]!==2)){o=0;continue}if(n[0]===3&&(!t||n[1]>t[0]&&n[1]<t[3])){o.label=n[1];break}if(n[0]===6&&o.label<t[1]){o.label=t[1],t=n;break}if(t&&o.label<t[2]){o.label=t[2],o.ops.push(n);break}t[2]&&o.ops.pop(),o.trys.pop();continue}n=u.call(e,o)}catch(p){n=[6,p],r=0}finally{a=t=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([l,v])}}}function T(e,u,a){if(a||arguments.length===2)for(var r,t=0,s=u.length;t<s;t++)!r&&t in u||(r||(r=Array.prototype.slice.call(u,0,t)),r[t]=u[t]);return e.concat(r||Array.prototype.slice.call(u))}var $={exports:{}},G,N={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */$.exports=function(){if(G)return N;G=1;var e=Q,u=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(i,l,v){var n,p={},C=null,R=null;for(n in v!==void 0&&(C=""+v),l.key!==void 0&&(C=""+l.key),l.ref!==void 0&&(R=l.ref),l)r.call(l,n)&&!s.hasOwnProperty(n)&&(p[n]=l[n]);if(i&&i.defaultProps)for(n in l=i.defaultProps)p[n]===void 0&&(p[n]=l[n]);return{$$typeof:u,type:i,key:C,ref:R,props:p,_owner:t.current}}return N.Fragment=a,N.jsx=o,N.jsxs=o,N}();var E=$.exports;function D(e){return e==null}function W(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Y(e){return Array.isArray(e)}var ue=f.createContext({active:!1,destroy:function(){},refresh:function(){}}),ce=f.memo(function(e){var u=e.children,a=e.active,r=e.destroy,t=e.refresh,s=f.useMemo(function(){return{active:a,destroy:r,refresh:t}},[a,r,t]);return E.jsx(ue.Provider,{value:s,children:u})},function(e,u){return e.active===u.active}),se=f.memo(function(e){var u=e.containerDivRef,a=e.active,r=e.children,t=e.destroy,s=e.name,o=e.refresh,i=e.errorElement,l=i===void 0?f.Fragment:i,v=e.cacheDivClassName,n=v===void 0?"cache-component":v,p=e.renderCount,C=e.async,R=e.microAsync,j=f.useRef(!1);j.current=j.current||a;var g=f.useMemo(function(){var d=document.createElement("div");return d.setAttribute("data-name",s),d.setAttribute("style","height: 100%"),d.setAttribute("data-render-count",p.toString()),d.className=n,d},[p]);f.useLayoutEffect(function(){var d=u.current;function k(){d==null||d.appendChild(g),g.classList.add("active"),g.setAttribute("data-active","true")}g.classList.remove("active","inactive"),a?((d==null?void 0:d.childNodes.length)!==0&&(d==null||d.childNodes.forEach(function(O){d==null||d.removeChild(O)})),C?R?Promise.resolve().then(function(){k()}):setTimeout(function(){k()},0):k()):d!=null&&d.contains(g)&&(g.setAttribute("data-active","false"),g.classList.add("inactive"),g.remove())},[a,u,g]);var A=f.useCallback(function(){t(s)},[t,s]);return j.current?J.createPortal(E.jsx(l,{children:E.jsx(ce,{active:a,destroy:A,refresh:o,children:r})}),g,s):null}),le={PRE:function(e){return e.shift(),e},LRU:function(e){var u=e.reduce(function(a,r){return a.lastActiveTime<r.lastActiveTime?a:r});return e.splice(e.indexOf(u),1),e}};function fe(){return f.useRef()}function ve(e){var u=this,a=e.aliveRef,r=e.cache,t=r===void 0||r,s=e.strategy,o=s===void 0?"LRU":s,i=e.activeName,l=e.children,v=e.max,n=v===void 0?10:v,p=e.errorElement,C=e.suspenseElement,R=C===void 0?f.Fragment:C,j=e.animationWrapper,g=j===void 0?f.Fragment:j,A=e.onBeforeActive,d=e.containerDivRef,k=e.cacheDivClassName,O=e.async,z=O!==void 0&&O,F=e.microAsync,H=F===void 0||F,U=d||f.useRef(null),I=f.useState([]),P=I[0],x=I[1];f.useLayoutEffect(function(){var m;D(i)||(m=function(){x(function(c){if(c=c.filter(function(y){return y.cache}),!D(e.exclude)){var b=Y(e.exclude)?e.exclude:[e.exclude];c=c.filter(function(y){return!b.some(function(w){return W(w)?w.test(y.name):y.name===w})})}if(!D(e.include)){var h=Y(e.include)?e.include:[e.include];c=c.filter(function(y){return h.some(function(w){return W(w)?w.test(y.name):y.name===w})})}var S=Date.now();if(c.find(function(y){return y.name===i}))return c.map(function(y){return y.name===i?(A&&A(i),{name:i,cache:t,lastActiveTime:S,ele:l,renderCount:y.renderCount}):y});if(A&&A(i),c.length>=n){var K=le[o];if(!K)throw new Error("strategy ".concat(o," is not supported"));c=K(c)}return T(T([],c,!0),[{name:i,cache:t,lastActiveTime:S,ele:l,renderCount:0}],!1)})},typeof f.startTransition=="function"?f.startTransition(m):m())},[l,i,x,n,t,o,e.exclude,e.include]),f.useImperativeHandle(a,function(){return{getCaches:function(){return P},removeCache:function(m){return oe(u,void 0,void 0,function(){return ie(this,function(c){return[2,new Promise(function(b){setTimeout(function(){x(function(h){return T([],h.filter(function(S){return S.name!==m}),!0)}),b()},0)})]})})},cleanAllCache:function(){x([])},cleanOtherCache:function(){x(function(m){return T([],m.filter(function(c){return c.name===i}),!0)})},refresh:function(m){x(function(c){var b=m||i;return c.map(function(h){return h.name===b?_(_({},h),{renderCount:h.renderCount+1}):h})})}}},[P,x,i]);var V=f.useCallback(function(m){x(function(c){return c.filter(function(b){return b.name!==m})})},[x]),q=f.useCallback(function(m){x(function(c){var b=m||i;return c.map(function(h){return h.name===b?_(_({},h),{renderCount:h.renderCount+1}):h})})},[x,i]);return E.jsxs(f.Fragment,{children:[E.jsx(g,{children:E.jsx("div",{ref:U,className:"keep-alive-render",style:{height:"100%"}})}),E.jsx(R,{children:P.map(function(m){var c=m.name,b=m.ele,h=m.renderCount;return E.jsx(se,{async:z,microAsync:H,renderCount:h,containerDivRef:U,errorElement:p,active:i===c,name:c,destroy:V,refresh:q,cacheDivClassName:k,children:b},c)})})]})}const me=f.memo(({closePadding:e})=>{const u=X(),a=Z(),r=fe(),t=L(ee),s=L(te),o=L(ne),i=L(re),l=i.page.animate?i.page.animateMode:"",v=(u.pathname+u.search).slice(1).split("/").join("_");return M(()=>{!r.current||!t||r.current.removeCache(t)},[t]),M(()=>{var n;(n=r.current)==null||n.refresh()},[o]),B.jsx("div",{className:ae("h-full flex-grow bg-layout",{"p-16px":!e}),children:B.jsx(ve,{aliveRef:r,activeName:v,cacheDivClassName:o?l:"",include:s,strategy:"LRU",children:a})})});export{me as G};
